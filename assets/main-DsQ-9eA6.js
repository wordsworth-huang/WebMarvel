import{L as s,C as l,T as B,c as ce,t as Q,a as h,b as ae,d as Z}from"./card_open-DIcfzGlm.js";const ue=[{name:"Hulk",numOfA:2,price:{yellow:0,blue:3,orange:5,red:3,purple:3},score:3,color:l.PURPLE,levelColor:s.BLUE,isSelected:!1},{name:"Spider Man",numOfA:0,price:{yellow:7,blue:0,orange:0,red:3,purple:0},score:5,color:l.ORANGE,levelColor:s.BLUE,isSelected:!1},{name:"Green Goblin",numOfA:0,price:{yellow:0,blue:7,orange:0,red:0,purple:3},score:5,color:l.YELLOW,levelColor:s.BLUE,isSelected:!1},{name:"Doctor Octopus",numOfA:0,price:{yellow:0,blue:7,orange:0,red:0,purple:0},score:4,color:l.YELLOW,levelColor:s.BLUE,isSelected:!1},{name:"Vision",numOfA:1,price:{yellow:3,blue:6,orange:0,red:3,purple:0},score:4,color:l.YELLOW,levelColor:s.BLUE,isSelected:!1},{name:"Doctor Strange",numOfA:1,price:{yellow:0,blue:0,orange:0,red:0,purple:7},score:4,color:l.RED,levelColor:s.BLUE,isSelected:!1},{name:"Captain Marvel",numOfA:1,price:{yellow:0,blue:3,orange:6,red:0,purple:3},score:4,color:l.PURPLE,levelColor:s.BLUE,isSelected:!1},{name:"Iron Fist",numOfA:0,price:{yellow:0,blue:0,orange:0,red:7,purple:0},score:4,color:l.RED,levelColor:s.BLUE,isSelected:!1},{name:"Thor",numOfA:2,price:{yellow:3,blue:3,orange:0,red:3,purple:5},score:3,color:l.RED,levelColor:s.BLUE,isSelected:!1},{name:"Loki",numOfA:0,price:{yellow:0,blue:3,orange:0,red:0,purple:7},score:5,color:l.RED,levelColor:s.BLUE,isSelected:!1},{name:"Gamora",numOfA:0,price:{yellow:0,blue:0,orange:3,red:7,purple:0},score:5,color:l.BLUE,levelColor:s.BLUE,isSelected:!1},{name:"Ant Man",numOfA:1,price:{yellow:3,blue:0,orange:3,red:6,purple:0},score:4,color:l.BLUE,levelColor:s.BLUE,isSelected:!1},{name:"Drax",numOfA:0,price:{yellow:0,blue:0,orange:7,red:0,purple:0},score:4,color:l.PURPLE,levelColor:s.BLUE,isSelected:!1},{name:"Luke Cage",numOfA:0,price:{yellow:3,blue:0,orange:7,red:0,purple:0},score:5,color:l.PURPLE,levelColor:s.BLUE,isSelected:!1},{name:"Captain America",numOfA:2,price:{yellow:5,blue:3,orange:3,red:0,purple:3},score:3,color:l.ORANGE,levelColor:s.BLUE,isSelected:!1},{name:"Black Widow",numOfA:2,price:{yellow:3,blue:3,orange:0,red:5,purple:3},score:3,color:l.BLUE,levelColor:s.BLUE,isSelected:!1},{name:"Nova",numOfA:0,price:{yellow:0,blue:0,orange:3,red:3,purple:6},score:4,color:l.RED,levelColor:s.BLUE,isSelected:!1},{name:"Black Bolt",numOfA:0,price:{yellow:7,blue:0,orange:0,red:0,purple:0},score:4,color:l.ORANGE,levelColor:s.BLUE,isSelected:!1},{name:"Iron Man",numOfA:2,price:{yellow:3,blue:5,orange:3,red:3,purple:0},score:3,color:l.YELLOW,levelColor:s.BLUE,isSelected:!1},{name:"Black Panther",numOfA:1,price:{yellow:6,blue:0,orange:3,red:0,purple:3},score:4,color:l.ORANGE,levelColor:s.BLUE,isSelected:!1}];class J{card;color;cardLeft;x;y;width;height;constructor(e,t,r,i,n,c,a){this.card=e,this.color=t,this.cardLeft=r,this.x=i,this.y=n,this.width=c,this.height=a}draw(e){this.card!==null&&(e.fillStyle=this.color,e.fillRect(this.x,this.y,this.width,this.height),e.lineWidth=this.card.isSelected?5:1,e.strokeStyle=this.card.isSelected?"red":"black",e.strokeRect(this.x,this.y,this.width,this.height),e.fillStyle="white",e.font="20px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText(`${this.cardLeft}`,this.x+this.width/2,this.y+this.height/2)),e.lineWidth=1}contains(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}}const de=[{name:"Prowler",numOfA:0,price:{yellow:0,blue:1,orange:1,red:2,purple:1},score:0,color:l.YELLOW,levelColor:s.GREEN,isSelected:!1},{name:"Wong",numOfA:0,price:{yellow:1,blue:1,orange:2,red:1,purple:0},score:0,color:l.RED,levelColor:s.GREEN,isSelected:!1},{name:"Modok",numOfA:0,price:{yellow:0,blue:0,orange:2,red:2,purple:0},score:0,color:l.YELLOW,levelColor:s.GREEN,isSelected:!1},{name:"Rocket",numOfA:0,price:{yellow:1,blue:0,orange:0,red:2,purple:0},score:0,color:l.YELLOW,levelColor:s.GREEN,isSelected:!1},{name:"Abomination",numOfA:0,price:{yellow:0,blue:2,orange:1,red:1,purple:1},score:0,color:l.PURPLE,levelColor:s.GREEN,isSelected:!1},{name:"Gorgon",numOfA:0,price:{yellow:2,blue:2,orange:0,red:0,purple:0},score:0,color:l.PURPLE,levelColor:s.GREEN,isSelected:!1},{name:"Kraven",numOfA:0,price:{yellow:0,blue:3,orange:0,red:0,purple:0},score:0,color:l.PURPLE,levelColor:s.GREEN,isSelected:!1},{name:"Spider Woman",numOfA:1,price:{yellow:1,blue:1,orange:0,red:3,purple:0},score:0,color:l.YELLOW,levelColor:s.GREEN,isSelected:!1},{name:"Spider Man 2099",numOfA:0,price:{yellow:2,blue:0,orange:0,red:1,purple:0},score:0,color:l.BLUE,levelColor:s.GREEN,isSelected:!1},{name:"Sand Man",numOfA:0,price:{yellow:0,blue:0,orange:4,red:0,purple:0},score:1,color:l.RED,levelColor:s.GREEN,isSelected:!1},{name:"Crystal",numOfA:0,price:{yellow:0,blue:0,orange:2,red:0,purple:2},score:0,color:l.RED,levelColor:s.GREEN,isSelected:!1},{name:"Winter Soldier",numOfA:1,price:{yellow:0,blue:2,orange:1,red:2,purple:0},score:0,color:l.PURPLE,levelColor:s.GREEN,isSelected:!1},{name:"Rhino",numOfA:0,price:{yellow:1,blue:1,orange:1,red:0,purple:1},score:0,color:l.PURPLE,levelColor:s.GREEN,isSelected:!1},{name:"Squirrel Girl",numOfA:1,price:{yellow:0,blue:0,orange:1,red:2,purple:2},score:0,color:l.YELLOW,levelColor:s.GREEN,isSelected:!1},{name:"Task Master",numOfA:0,price:{yellow:4,blue:0,orange:0,red:0,purple:0},score:1,color:l.BLUE,levelColor:s.GREEN,isSelected:!1},{name:"Elektra",numOfA:0,price:{yellow:2,blue:0,orange:0,red:0,purple:2},score:0,color:l.BLUE,levelColor:s.GREEN,isSelected:!1},{name:"Vulture",numOfA:0,price:{yellow:0,blue:0,orange:0,red:4,purple:0},score:1,color:l.YELLOW,levelColor:s.GREEN,isSelected:!1},{name:"Scarlet Spider",numOfA:0,price:{yellow:0,blue:1,orange:1,red:1,purple:2},score:0,color:l.ORANGE,levelColor:s.GREEN,isSelected:!1},{name:"Spider Girl",numOfA:0,price:{yellow:1,blue:1,orange:1,red:0,purple:1},score:0,color:l.ORANGE,levelColor:s.GREEN,isSelected:!1},{name:"Lockjaw",numOfA:0,price:{yellow:1,blue:1,orange:1,red:0,purple:1},score:0,color:l.BLUE,levelColor:s.GREEN,isSelected:!1},{name:"Lizard",numOfA:0,price:{yellow:0,blue:2,orange:0,red:0,purple:1},score:0,color:l.PURPLE,levelColor:s.GREEN,isSelected:!1},{name:"Hawkeye",numOfA:1,price:{yellow:1,blue:2,orange:0,red:0,purple:2},score:0,color:l.ORANGE,levelColor:s.GREEN,isSelected:!1},{name:"Mysterio",numOfA:0,price:{yellow:0,blue:0,orange:3,red:0,purple:0},score:0,color:l.RED,levelColor:s.GREEN,isSelected:!1},{name:"Valkyrie",numOfA:1,price:{yellow:3,blue:0,orange:1,red:0,purple:1},score:0,color:l.BLUE,levelColor:s.GREEN,isSelected:!1},{name:"Kingpin",numOfA:0,price:{yellow:1,blue:0,orange:0,red:0,purple:2},score:0,color:l.ORANGE,levelColor:s.GREEN,isSelected:!1},{name:"Yondu",numOfA:0,price:{yellow:0,blue:0,orange:0,red:0,purple:4},score:1,color:l.ORANGE,levelColor:s.GREEN,isSelected:!1},{name:"Electro",numOfA:0,price:{yellow:0,blue:0,orange:2,red:1,purple:0},score:0,color:l.RED,levelColor:s.GREEN,isSelected:!1},{name:"Bullseye",numOfA:0,price:{yellow:0,blue:1,orange:1,red:2,purple:1},score:0,color:l.BLUE,levelColor:s.GREEN,isSelected:!1},{name:"Grand Master",numOfA:0,price:{yellow:1,blue:1,orange:0,red:1,purple:1},score:0,color:l.YELLOW,levelColor:s.GREEN,isSelected:!1},{name:"Spider Ham",numOfA:0,price:{yellow:1,blue:0,orange:0,red:0,purple:2},score:0,color:l.ORANGE,levelColor:s.GREEN,isSelected:!1},{name:"Silver Sable",numOfA:0,price:{yellow:0,blue:0,orange:0,red:0,purple:3},score:0,color:l.ORANGE,levelColor:s.GREEN,isSelected:!1},{name:"Wasp",numOfA:1,price:{yellow:2,blue:1,orange:2,red:0,purple:0},score:0,color:l.BLUE,levelColor:s.GREEN,isSelected:!1},{name:"Quake",numOfA:1,price:{yellow:0,blue:1,orange:3,red:0,purple:1},score:0,color:l.RED,levelColor:s.GREEN,isSelected:!1},{name:"Triton",numOfA:0,price:{yellow:1,blue:1,orange:1,red:1,purple:0},score:0,color:l.RED,levelColor:s.GREEN,isSelected:!1},{name:"America Chavez",numOfA:1,price:{yellow:1,blue:3,orange:0,red:1,purple:0},score:0,color:l.PURPLE,levelColor:s.GREEN,isSelected:!1},{name:"Kate Bishop",numOfA:1,price:{yellow:0,blue:1,orange:0,red:1,purple:3},score:0,color:l.ORANGE,levelColor:s.GREEN,isSelected:!1},{name:"Moon Knight",numOfA:0,price:{yellow:3,blue:0,orange:0,red:0,purple:0},score:0,color:l.BLUE,levelColor:s.GREEN,isSelected:!1},{name:"Scorpion",numOfA:0,price:{yellow:0,blue:4,orange:0,red:0,purple:0},score:1,color:l.PURPLE,levelColor:s.GREEN,isSelected:!1},{name:"Ms. Marvel",numOfA:1,price:{yellow:2,blue:0,orange:2,red:1,purple:0},score:0,color:l.RED,levelColor:s.GREEN,isSelected:!1},{name:"Baron Zemo",numOfA:0,price:{yellow:0,blue:0,orange:0,red:3,purple:0},score:0,color:l.YELLOW,levelColor:s.GREEN,isSelected:!1}],he=[{name:"Hela",numOfA:0,price:{yellow:0,blue:6,orange:0,red:0,purple:0},score:3,color:l.RED,levelColor:s.ORANGE,isSelected:!1},{name:"Cross Bones",numOfA:0,price:{yellow:4,blue:2,orange:1,red:0,purple:0},score:2,color:l.PURPLE,levelColor:s.ORANGE,isSelected:!1},{name:"Beta Ray Bill",numOfA:1,price:{yellow:0,blue:3,orange:2,red:3,purple:0},score:1,color:l.RED,levelColor:s.ORANGE,isSelected:!1},{name:"Maximus",numOfA:0,price:{yellow:0,blue:2,orange:4,red:1,purple:0},score:2,color:l.YELLOW,levelColor:s.ORANGE,isSelected:!1},{name:"Quick Silver",numOfA:1,price:{yellow:2,blue:0,orange:0,red:3,purple:3},score:1,color:l.BLUE,levelColor:s.ORANGE,isSelected:!1},{name:"Red Skull",numOfA:0,price:{yellow:0,blue:0,orange:6,red:0,purple:0},score:3,color:l.YELLOW,levelColor:s.ORANGE,isSelected:!1},{name:"Star Lord",numOfA:0,price:{yellow:0,blue:1,orange:2,red:4,purple:0},score:2,color:l.ORANGE,levelColor:s.ORANGE,isSelected:!1},{name:"She Hulk",numOfA:1,price:{yellow:3,blue:0,orange:2,red:0,purple:2},score:1,color:l.PURPLE,levelColor:s.ORANGE,isSelected:!1},{name:"Okoye",numOfA:1,price:{yellow:3,blue:2,orange:0,red:0,purple:3},score:1,color:l.PURPLE,levelColor:s.ORANGE,isSelected:!1},{name:"Karnak",numOfA:0,price:{yellow:3,blue:0,orange:5,red:0,purple:0},score:2,color:l.YELLOW,levelColor:s.ORANGE,isSelected:!1},{name:"The Collector",numOfA:0,price:{yellow:0,blue:0,orange:5,red:0,purple:0},score:2,color:l.YELLOW,levelColor:s.ORANGE,isSelected:!1},{name:"Medusa",numOfA:0,price:{yellow:0,blue:5,orange:3,red:0,purple:0},score:2,color:l.RED,levelColor:s.ORANGE,isSelected:!1},{name:"Dare Devil",numOfA:0,price:{yellow:0,blue:0,orange:0,red:6,purple:0},score:3,color:l.ORANGE,levelColor:s.ORANGE,isSelected:!1},{name:"Miles Morales",numOfA:0,price:{yellow:0,blue:0,orange:0,red:0,purple:5},score:2,color:l.BLUE,levelColor:s.ORANGE,isSelected:!1},{name:"Black Cat",numOfA:0,price:{yellow:0,blue:0,orange:0,red:3,purple:5},score:2,color:l.BLUE,levelColor:s.ORANGE,isSelected:!1},{name:"Scarlet Witch",numOfA:1,price:{yellow:2,blue:3,orange:0,red:2,purple:0},score:1,color:l.RED,levelColor:s.ORANGE,isSelected:!1},{name:"Shuri",numOfA:1,price:{yellow:3,blue:2,orange:3,red:0,purple:0},score:1,color:l.YELLOW,levelColor:s.ORANGE,isSelected:!1},{name:"Nick Fury",numOfA:1,price:{yellow:0,blue:0,orange:3,red:3,purple:2},score:1,color:l.ORANGE,levelColor:s.ORANGE,isSelected:!1},{name:"Venom",numOfA:0,price:{yellow:0,blue:5,orange:0,red:0,purple:0},score:2,color:l.RED,levelColor:s.ORANGE,isSelected:!1},{name:"Jessica Jones",numOfA:0,price:{yellow:6,blue:0,orange:0,red:0,purple:0},score:3,color:l.PURPLE,levelColor:s.ORANGE,isSelected:!1},{name:"Nebula",numOfA:0,price:{yellow:0,blue:0,orange:0,red:0,purple:6},score:3,color:l.BLUE,levelColor:s.ORANGE,isSelected:!1},{name:"Ghost Spider",numOfA:0,price:{yellow:0,blue:2,orange:1,red:0,purple:4},score:2,color:l.BLUE,levelColor:s.ORANGE,isSelected:!1},{name:"Carnage",numOfA:0,price:{yellow:5,blue:0,orange:0,red:3,purple:0},score:2,color:l.PURPLE,levelColor:s.ORANGE,isSelected:!1},{name:"Ghost Rider",numOfA:0,price:{yellow:2,blue:4,orange:0,red:0,purple:1},score:2,color:l.RED,levelColor:s.ORANGE,isSelected:!1},{name:"War Machine",numOfA:1,price:{yellow:0,blue:2,orange:2,red:0,purple:3},score:1,color:l.BLUE,levelColor:s.ORANGE,isSelected:!1},{name:"Ronan",numOfA:0,price:{yellow:5,blue:0,orange:0,red:0,purple:0},score:2,color:l.PURPLE,levelColor:s.ORANGE,isSelected:!1},{name:"Punisher",numOfA:0,price:{yellow:0,blue:0,orange:0,red:5,purple:0},score:2,color:l.ORANGE,levelColor:s.ORANGE,isSelected:!1},{name:"Falcon",numOfA:1,price:{yellow:3,blue:0,orange:0,red:3,purple:2},score:1,color:l.ORANGE,levelColor:s.ORANGE,isSelected:!1},{name:"Groot",numOfA:0,price:{yellow:0,blue:0,orange:0,red:5,purple:3},score:2,color:l.ORANGE,levelColor:s.ORANGE,isSelected:!1},{name:"Maria Hill",numOfA:1,price:{yellow:0,blue:2,orange:3,red:0,purple:2},score:1,color:l.YELLOW,levelColor:s.ORANGE,isSelected:!1}];function be(){return{yellow:4,blue:4,orange:0,red:0,purple:0}}function ve(){return{yellow:0,blue:0,orange:0,red:4,purple:4}}function Le(){return{yellow:4,blue:0,orange:4,red:0,purple:0}}function Ge(){return{yellow:0,blue:0,orange:4,red:0,purple:4}}function Ne(){return{yellow:0,blue:4,orange:0,red:4,purple:0}}function Pe(){return{yellow:3,blue:0,orange:3,red:0,purple:3}}function Be(){return{yellow:0,blue:3,orange:0,red:3,purple:3}}function Ue(){return{yellow:3,blue:3,orange:0,red:3,purple:0}}const xe=[be(),ve(),Le(),Ge(),Ne(),Pe(),Be(),Ue()];class We{tokens;city;people;tmp;coveredCards;hasA;isWinner;constructor(){this.tokens=new B,this.city=[],this.people=[],this.tmp=new B,this.coveredCards=[],this.hasA=!1,this.isWinner=!1}addCard(e){this.people.push(e)}getCardsCount(e){return this.people.filter(t=>t.color===e).length}getYellowCardsCount(){return this.people.filter(e=>e.color===l.YELLOW).length}getBlueCardsCount(){return this.people.filter(e=>e.color===l.BLUE).length}getOrangeCardsCount(){return this.people.filter(e=>e.color===l.ORANGE).length}getRedCardsCount(){return this.people.filter(e=>e.color===l.RED).length}getPurpleCardsCount(){return this.people.filter(e=>e.color===l.PURPLE).length}showCity1(){return this.city.length>=1}showCity2(){return this.city.length>=2}showCity3(){return this.city.length>=3}showCity4(){return this.city.length>=4}showGreen(){return this.people.some(e=>e.levelColor===s.BLUE)}getScores(){const e=this.people.reduce((i,n)=>i+n.score,0),t=this.city.length*3,r=this.hasA?3:0;return e+t+r}getNumOfA(){return this.people.reduce((e,t)=>e+t.numOfA,0)}canWin(){return this.people.some(e=>e.color===l.YELLOW)&&this.people.some(e=>e.color===l.BLUE)&&this.people.some(e=>e.color===l.ORANGE)&&this.people.some(e=>e.color===l.RED)&&this.people.some(e=>e.color===l.PURPLE)&&this.showGreen()&&this.getScores()>=16}isClean(){return this.tokens.equals(new B)&&this.city.length===0&&this.people.length===0&&this.coveredCards.length===0}}class Te{x;y;size;angle=0;targetAngle=0;cornerIndex=0;bounce=0;constructor(e,t,r=48){this.x=e,this.y=t,this.size=r}resetCornerIndex(){this.cornerIndex=0}pointTo(e,t){const r=e.length;t&&(this.cornerIndex=(this.cornerIndex+1)%r);const i=e[this.cornerIndex].x,n=e[this.cornerIndex].y;this.targetAngle=Math.atan2(n-this.y,i-this.x),this.bounce=1}draw(e){const t=this.x,r=this.y;this.angle=this.targetAngle,e.save(),e.translate(t,r),e.rotate(this.angle),e.font=`${this.size}px serif`,e.textAlign="center",e.textBaseline="middle",e.fillText("âžœ",0,0),e.restore()}contains(e,t){const r=e-this.x,i=t-this.y,n=Math.cos(-this.angle),c=Math.sin(-this.angle),a=r*n-i*c,u=r*c+i*n,d=this.size*.5;return a>=-d&&a<=d&&u>=-d&&u<=d}}let te=0;function Ye(o){te=o}let k=2;function Ie(o){k=o}let y=[];function Me(o){y=o}let P=new B;function De(o){P=o}let b=null;function H(o){b=o}let fe=[];function _e(o){fe=o}let pe=[];function je(o){pe=o}let Ee=[];function ze(o){Ee=o}let D=[];function He(o){D=o}class ge{city;width;height;x;y;constructor(e,t,r,i,n){this.city=e,this.x=t,this.y=r,this.width=i,this.height=n}draw(e){if(this.city===null)return;e.fillStyle="#fff",e.fillRect(this.x,this.y,this.width,this.height),e.strokeStyle="black",e.strokeRect(this.x,this.y,this.width,this.height);const t=this.width*4/9,r=this.height*4/9,i=r/9,n=Object.entries(this.city).filter(([u,d])=>d>0).slice(0,3),c=this.y+i,a=c+r+i;n.forEach(([u,d],p)=>{let E=0,w=0;if(p===0)E=this.x+this.width/2-t/2,w=c;else if(p===1&&n.length===2)E=this.x+this.width/2-t/2,w=a;else{const S=p===1?i:i*2+t;E=this.x+S,w=a}e.fillStyle=ce[u],e.fillRect(E,w,t,r),e.strokeStyle="black",e.strokeRect(E,w,t,r),e.fillStyle="black",e.font=`${r-4}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(String(d),E+t/2,w+r/2+r*.05)})}contains(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}}class T{img;path;width;height;x;y;constructor(e,t,r,i,n,c){this.path=e,this.x=t,this.y=r,this.width=i,this.height=n,e&&(this.img=new Image,this.img.onload=c,this.img.src=e)}draw(e){if(!this.img||!this.img.complete)return;const t=Math.min(this.width/this.img.width,this.height/this.img.height),r=this.img.width*t,i=this.img.height*t,n=this.x+(this.width-r)/2,c=this.y+(this.height-i)/2;e.drawImage(this.img,n,c,r,i)}}class L{text;color;x;y;r;width;height;isRect;show;constructor(e,t,r,i,n,c,a,u,d=!0){this.text=e,this.color=t,this.x=r,this.y=i,this.r=n,this.width=c,this.height=a,this.isRect=u,this.show=d}draw(e){let t=0,r=0,i=0;e.fillStyle=this.show?this.color:Q,e.strokeStyle=this.show?"black":Q,this.isRect?(e.fillRect(this.x,this.y,this.width,this.height),e.strokeRect(this.x,this.y,this.width,this.height),t=this.height,r=this.width/2,i=this.height/2):(e.beginPath(),e.arc(this.x+this.r,this.y+this.r,this.r,0,Math.PI*2),e.fill(),e.stroke(),t=this.r*2,r=this.r,i=this.r),this.show&&(e.fillStyle="black",e.font=`${t-4}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(this.text,this.x+r,this.y+i+i*2*.05))}contains(e,t){const r=this.isRect?this.width:this.r*2,i=this.isRect?this.height:this.r*2;return e>=this.x&&e<=this.x+r&&t>=this.y&&t<=this.y+i}}class me{text;width;height;x;y;constructor(e,t,r,i,n){this.text=e,this.x=t,this.y=r,this.width=i,this.height=n}draw(e){let t=this.height/2;e.fillStyle="black",e.font=`${t}px Arial`,e.textAlign="start",e.textBaseline="middle",e.fillText(this.text,this.x,this.y+t+t*2*.05)}contains(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}}const Fe="modulepreload",Xe=function(o){return"/WebMarvel/"+o},ie={},$e=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),a=c?.nonce||c?.getAttribute("nonce");i=u(t.map(d=>{if(d=Xe(d),d in ie)return;ie[d]=!0;const p=d.endsWith(".css"),E=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${E}`))return;const w=document.createElement("link");if(w.rel=p?"stylesheet":Fe,p||(w.as="script"),w.crossOrigin="",w.href=d,a&&w.setAttribute("nonce",a),document.head.appendChild(w),p)return new Promise((S,A)=>{w.addEventListener("load",S),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})}))}function n(c){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=c,window.dispatchEvent(a),!a.defaultPrevented)throw c}return i.then(c=>{for(const a of c||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};function Ke(o={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:n,onRegisterError:c}=o;let a,u;const d=async(E=!0)=>{await u};async function p(){if("serviceWorker"in navigator){if(a=await $e(async()=>{const{Workbox:E}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:E}},[]).then(({Workbox:E})=>new E("/WebMarvel/sw.js",{scope:"/WebMarvel/",type:"classic"})).catch(E=>{c?.(E)}),!a)return;a.addEventListener("activated",E=>{(E.isUpdate||E.isExternal)&&window.location.reload()}),a.addEventListener("installed",E=>{E.isUpdate||r?.()}),a.register({immediate:e}).then(E=>{n?n("/WebMarvel/sw.js",E):i?.(E)}).catch(E=>{c?.(E)})}}return u=p(),d}Ke({immediate:!0});const V=[{id:"action_reset",icon:"ðŸ”„",title:"Reset",action:()=>{oe()}},{id:"action_add_player",icon:"ðŸ‘«",title:"Add Player",action:()=>{Ie(k===2?3:k===3?4:2),oe()}},{id:"action_manual",icon:"ðŸ“–",title:"Manual",action:()=>{const o=["./assets/manual1.png","./assets/manual2.png","./assets/manual3.png","./assets/manual4.png"],e=window.open("","_blank");if(e){const t=e.document.head,r=e.document.createElement("title");r.textContent="Manual",t.appendChild(r);const i=e.document.createElement("link");i.rel="icon",i.href="./assets/favicon.png",i.type="image/png",t.appendChild(i);const n=e.document.createElement("style");n.textContent=`
                body {
                    margin: 0;
                    padding: 20px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    background: #f0f0f0;
                }
                img {
                    max-width: 80%;
                    margin-bottom: 20px;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                    border-radius: 8px;
                }
            `,t.appendChild(n);const c=e.document.body;o.forEach(a=>{const u=e.document.createElement("img");u.src=a,c.appendChild(u)})}}},{id:"action_show_people",icon:"âœ‹",title:"show people",action:()=>{oo()}}];function F(o){const e=[...o];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}function qe(){return _e(F(ue)),je(F(he)),ze(F(de)),[{backStack:fe,closeCard:new J(null,s.BLUE,0,0,0,0,0),openCards:[],color:s.BLUE,y:0},{backStack:pe,closeCard:new J(null,s.ORANGE,0,0,0,0,0),openCards:[],color:s.ORANGE,y:0},{backStack:Ee,closeCard:new J(null,s.GREEN,0,0,0,0,0),openCards:[],color:s.GREEN,y:0}]}function Je(){He(F(xe).slice(0,k))}function Qe(){const e=7-(k===2?3:k===3?2:0);De(new B({[h.YELLOW]:e,[h.BLUE]:e,[h.ORANGE]:e,[h.RED]:e,[h.PURPLE]:e,[h.GRAY]:5}))}function Ze(){return Me(Array.from({length:k},()=>new We)),Array.from({length:k},()=>({people:[],tokens:[],green:new L("G","#0f0",0,0,0,0,0,!1,!1),tmpTokens:[],scores:new me("",0,0,0,0),cities:[],a:new T("",0,0,0,0,null),btnIn:new L("IN","#0f0",0,0,0,0,0,!0,!1),btnOut:new L("OUT","#0ff",0,0,0,0,0,!0,!1),showFirst:new T("",0,0,0,0,null),showWinner:new T("",0,0,0,0,null),coveredCards:[]}))}function Ve(o,e){to(o,e),lo(o,e),ro(o,e),no(o,e),so(o,e),co(o,e),ao(o,e),uo(o,e),se()}function G(){H(null),ue.forEach(o=>o.isSelected=!1),he.forEach(o=>o.isSelected=!1),de.forEach(o=>o.isSelected=!1),y.forEach(o=>{o.coveredCards.forEach(e=>e.isSelected=!1)})}function eo(o){const e=g.cornerIndex,t=y[e].tmp.tokens;if(t[h.GRAY]!==0)return!1;if(o===h.GRAY)return Object.entries(t).filter(([u])=>u!==o.toString()).reduce((u,[,d])=>u+d,0)==0&&y[e].coveredCards.length<3;const r=Object.entries(t).filter(([c])=>c!==o.toString()&&o!==h.GRAY.toString());if(r.some(([,c])=>c===2))return!1;const n=r.reduce((c,[,a])=>c+a,0);return t[o]===0?n<=2:t[o]===1?n===0&&P.tokens[o]>=3:!1}function oo(){const o=window.open("show_people.html","hand");setTimeout(()=>{o?.postMessage({type:"HAND_UPDATE",players:y},"*")},300)}function to(o,e){V.forEach(t=>{t.x<=o&&o<=t.x+t.width&&t.y<=e&&e<=t.y+t.height&&t.action()})}function lo(o,e){Y.forEach(t=>{if(t.contains(o,e)){const r=t.color;P.tokens[r]>0&&(eo(r)?(P.tokens[r]--,t.value=P.tokens[r],y[g.cornerIndex].tmp.tokens[r]++):(q(),G()))}})}function ro(o,e){I.forEach(t=>{const r=t.closeCard,i=r.contains(o,e);i&&r.card!==null&&(G(),r.card.isSelected=i,H(r.card)),t.openCards.forEach(n=>{n.contains(o,e)&&n.card!==null&&(G(),n.card.isSelected=!0,H(n.card))})}),M.forEach((t,r)=>{r===g.cornerIndex&&t.coveredCards.forEach(i=>{i.contains(o,e)&&i.card!==null&&(G(),i.card.isSelected=!0,H(i.card))})})}function _(){const o=Se();g.pointTo(o,!0)}function we(){let o=!0;y.forEach(e=>{e.isClean()||(o=!1)}),o&&Ye(g.cornerIndex)}function no(o,e){M.forEach((t,r)=>{t.btnIn.contains(o,e)?Re(r):t.btnOut.contains(o,e)&&Ae(r)})}function so(o,e){K.forEach((t,r)=>{if(t.contains(o,e))for(let i=0;i<=k;i++)Oe(i,r,!0)})}function io(o){const e=y[g.cornerIndex];e.tokens.tokens[o]--,e.tmp.tokens[o]++}function co(o,e){M.forEach(t=>{t.tokens.forEach(r=>{r.contains(o,e)&&io(r.color)})})}function ao(o,e){g.contains(o,e)&&(_(),we())}function uo(o,e){let t=v;t.x<=o&&o<=t.x+t.width&&t.y<=e&&e<=t.y+t.height&&Re(g.cornerIndex),t=x,t.x<=o&&o<=t.x+t.width&&t.y<=e&&e<=t.y+t.height&&Ae(g.cornerIndex)}function le(){const o=y[g.cornerIndex],e=o.tmp.tokens,t=o.tokens.tokens;for(const r of Object.values(h))t[r]+=e[r];o.tmp=new B}function q(){const o=y[g.cornerIndex],e=o.tmp.tokens,t=P.tokens;for(const r of Object.values(h))t[r]+=e[r];o.tmp=new B}function ho(){confirm("é€€éŒ¯è«‹æŒ‰ã€Œç¢ºå®šã€æ”¶å›žï¼›ä¸èƒ½ç›´æŽ¥æ‹¿ï¼è«‹æŒ‰ã€Œå–æ¶ˆã€é‚„éŠ€è¡Œ")?le():(q(),G())}function fo(){confirm("ç¢ºå®šä¸æ‹¿ç°è‰²ï¼Ÿ")&&y[g.cornerIndex].coveredCards.length<3&&re()}function po(){confirm("ä¸èƒ½è²·ï¼Œæ˜¯å¦æ”¶å…¥è“‹ç‰Œä¸­ï¼Ÿ")&&y[g.cornerIndex].coveredCards.length<3&&re()}function Ce(){I.forEach(o=>{let e=o.closeCard.card;e!==null&&e==b&&(e=o.backStack.shift()??null),o.openCards.forEach(t=>{if(t.card!==null&&t.card==b){const r=o.backStack.shift()??null;t.card=r}})})}function re(){const o=g.cornerIndex,e=y[o];b!==null&&e.coveredCards.push(b),le(),Ce(),G();const t=e.showGreen()?1:0;Object.entries(e.tokens.tokens).reduce((i,[,n])=>i+n,0)+t<=10&&($(o),_())}function Eo(o,e,t,r,i){if(b===null)return;const n=o+e+t+r+i,c=b,a=y[g.cornerIndex],u=a.tokens.tokens,d=Math.max(c.price[l.YELLOW]-a.getYellowCardsCount(),0),p=Math.max(c.price[l.BLUE]-a.getBlueCardsCount(),0),E=Math.max(c.price[l.ORANGE]-a.getOrangeCardsCount(),0),w=Math.max(c.price[l.RED]-a.getRedCardsCount(),0),S=Math.max(c.price[l.PURPLE]-a.getPurpleCardsCount(),0);u[h.YELLOW]-=d,u[h.YELLOW]=Math.max(u[h.YELLOW],0),u[h.BLUE]-=p,u[h.BLUE]=Math.max(u[h.BLUE],0),u[h.ORANGE]-=E,u[h.ORANGE]=Math.max(u[h.ORANGE],0),u[h.RED]-=w,u[h.RED]=Math.max(u[h.RED],0),u[h.PURPLE]-=S,u[h.PURPLE]=Math.max(u[h.PURPLE],0),u[h.GRAY]-=n;const A=P.tokens;A[h.YELLOW]+=d-o,A[h.BLUE]+=p-e,A[h.ORANGE]+=E-t,A[h.RED]+=w-r,A[h.PURPLE]+=S-i,A[h.GRAY]+=n}function ye(){const o=y.find(r=>r.hasA),e=y.filter(r=>r.getNumOfA()>=3).sort((r,i)=>i.getNumOfA()-r.getNumOfA());if(e.length===0)return;const t=e[0];if(!o){t.hasA=!0;return}t.getNumOfA()>o.getNumOfA()&&(o.hasA=!1,t.hasA=!0)}function go(){const o=g.cornerIndex,e=y[o],t=[];D.forEach((i,n)=>{i!==null&&i[l.YELLOW]<=e.getYellowCardsCount()&&i[l.BLUE]<=e.getBlueCardsCount()&&i[l.ORANGE]<=e.getOrangeCardsCount()&&i[l.RED]<=e.getRedCardsCount()&&i[l.PURPLE]<=e.getPurpleCardsCount()&&t.push(n)});const r=t.length;return r===0?(ye(),!0):r===1?(Oe(o,t[0]),!0):(alert("è«‹é¸ä¸€å¼µåŸŽå¸‚å¡"),!1)}function Oe(o,e,t=!1){if(g.cornerIndex!==o)return;const i=y[o];let n=D[e];n!==null&&n[l.YELLOW]<=i.getYellowCardsCount()&&n[l.BLUE]<=i.getBlueCardsCount()&&n[l.ORANGE]<=i.getOrangeCardsCount()&&n[l.RED]<=i.getRedCardsCount()&&n[l.PURPLE]<=i.getPurpleCardsCount()&&(i.city.push(n),D[e]=null),ye(),t&&($(o),_())}function Re(o){if(g.cornerIndex!==o)return;const e=y[o],t=e.tokens.tokens,r=e.tmp.tokens;if(r[h.GRAY]!==0)if(b===null||e.coveredCards.some(c=>c.name===b?.name)){ho();return}else{re();return}const n=Object.entries(r).filter(([c])=>c!==h.GRAY.toString()).reduce((c,[,a])=>c+a,0);if(b==null)if(n>0){le();const c=e.showGreen()?1:0;Object.entries(t).reduce((u,[,d])=>u+d,0)+c<=10&&($(o),_())}else return;else if(n>0)q(),G();else{if(e.coveredCards.length<3&&I.some(O=>O.closeCard.card==b)){fo();return}const c=b,a=e.getYellowCardsCount()+t[h.YELLOW],u=e.getBlueCardsCount()+t[h.BLUE],d=e.getOrangeCardsCount()+t[h.ORANGE],p=e.getRedCardsCount()+t[h.RED],E=e.getPurpleCardsCount()+t[h.PURPLE],w=c.price[l.YELLOW]>a?c.price[l.YELLOW]-a:0,S=c.price[l.BLUE]>u?c.price[l.BLUE]-u:0,A=c.price[l.ORANGE]>d?c.price[l.ORANGE]-d:0,j=c.price[l.RED]>p?c.price[l.RED]-p:0,z=c.price[l.PURPLE]>E?c.price[l.PURPLE]-E:0,U=w+S+A+j+z;if(t[h.GRAY]>=U){if(Eo(w,S,A,j,z),e.addCard(c),e.coveredCards.some(R=>R.name===c.name)){const R=e.coveredCards.findIndex(N=>N.name===c.name);R!==-1&&e.coveredCards.splice(R,1)}else Ce();go()&&($(o),_())}else{po();return}G()}}function Ae(o){g.cornerIndex===o&&(q(),G())}function $(o){if(o!==(k-1+te)%k)return;if(Array.from({length:k},(c,a)=>y[a].canWin())[o]){y[o].isWinner=!0;return}const t=y.filter(c=>c.canWin());if(t.length===0)return;const r=t.sort((c,a)=>a.getScores()-c.getScores()),i=r.filter(c=>c.getScores()===r[0].getScores());if(i.length===1){i[0].isWinner=!0;return}console.log("===Blaze=== 5");const n=i.find(c=>c.hasA);if(n)n.isWinner=!0;else{const c=i.sort((u,d)=>u.people.length-d.people.length);c.filter(u=>u.people.length===c[0].people.length).forEach(u=>u.isWinner=!0)}}let I=[],K=[],Y=[],M=[];const g=new Te(200,200,48),v=new L("IN","#0f0",0,0,0,400,200,!0,!0),x=new L("OUT","#0ff",0,0,0,400,200,!0,!0),C=document.getElementById("canvas"),m=C.getContext("2d"),f=10,mo=1/20,wo=1/30,Co=1/50,yo=1/40,Oo=1/40;let ee=0,ne=0,ke=0;function Ro(){const o=C.width*mo,e=o*2,t=o+f,r=C.width/2-o*1.5-f*1;ne=r+o*4+f*3;const i=(C.height-W)/2-e*1-f;ee=i,I.forEach((n,c)=>{if(n.y=i+c*(e+f),n.openCards.length===0)for(let u=0;u<4;u++){const d=n.backStack.shift()??null;n.openCards.push(new ae(d,n.color,r+u*t,n.y,o,e))}else n.openCards.forEach((u,d)=>{u.x=r+d*t,u.y=n.y,u.width=o,u.height=e});const a=n.backStack.length;n.closeCard.card=a>0?n.backStack[0]:null,n.closeCard.cardLeft=a,n.closeCard.x=r-t,n.closeCard.y=n.y,n.closeCard.width=o,n.closeCard.height=e})}function Ao(){const o=C.width*wo,e=o,t=o+f,r=ne+f;ke=ee+2*e+f,K=[],D.forEach((i,n)=>{const c=n%2,a=n<2?0:1;K.push(new ge(i,r+c*t,ee+a*(e+f),o,e))})}function ko(){const o=C.width*yo/2,e=o*2+f,t=ne+f,r=ke+f;Y=[],Object.values(h).forEach((i,n)=>{const c=n%2,a=Math.floor(n/2);Y.push(new Z(P.tokens[i],i,t+c*e,r+a*e,o))})}function So(){const o=C.width*Co,e=o*6+f*4,t=.8,r=f+(o+f)*8+(o*t+f)*3,i=4;M.forEach((n,c)=>{const a=y[c],u=c<2?f:C.width-f-r;let d=u+o,p=c===0||c===3?C.height-f-o:W+f+e;const E=c===0||c===3?p-e*2:p+o;let w=a.isWinner?"./assets/thanos.webp":"";const S=Math.min(r,e);n.showWinner=new T(w,u,E,S,S,X),n.btnIn=new L("IN","#0f0",d,p,0,o*2,o,!0,!0),d+=o*2+f*2,n.btnOut=new L("OUT","#0ff",d,p,0,o*2,o,!0,!0),d+=o*2+f*2,w=te===c?"./assets/first.png":"",n.showFirst=new T(w,d,p,o*2,o,X),p-=o+f,d=u,n.scores=new me(`åˆ†ï¼š${a.getScores()} Aï¼š${a.getNumOfA()}`,d,p,o*4,o),d+=n.scores.width+f,a.city.forEach((O,R)=>{const N=new ge(O,d+R*(o+f),p,o,o);n.cities.push(N)});const A=a.city.length;let j=Array.from({length:i-A},(O,R)=>new L("",Q,d+(A+R)*(o+f),p,0,o,o,!0,!1));n.cities.push(...j),d+=i*(o+f),w=a.hasA?"./assets/marvel_a.png":"",n.a=new T(w,d,p,o,o,X),p-=o+f,d=u,n.tokens=[],Object.values(h).forEach(O=>{n.tokens.push(new Z(a.tokens.tokens[O],O,d,p,o/2)),d+=o+f});const z=a.showGreen();n.green=new L("G","#0F0",d,p,o/2,0,0,!1,z),d+=(o+f)*2,n.tmpTokens=[],Object.values(h).forEach(O=>{const R=a.tmp.tokens[O],N=n.tmpTokens.length;R>0&&n.tmpTokens.push(new Z(R,O,d+N*(o*.8+f),p,o*t/2))}),d=u,p-=o+f,n.people=[],Object.values(l).forEach((O,R)=>{const N=a.getCardsCount(O);n.people.push(new L(String(N),ce[O],d+R*(o+f),p,0,o,o,!0,N>0))});const U=o*1.5;p-=U*2+f,n.coveredCards=[],a.coveredCards.forEach((O,R)=>{n.coveredCards.push(new ae(O,O.color,d+R*(U+f),p,U,U*2))})})}function bo(){const o=Y[Y.length-1];g.size=C.width*Oo,g.x=o.x,g.y=o.y+o.r*2+f+g.size}function vo(){v.x=g.x-g.size,v.y=g.y+g.size+f,v.width=g.size*2,v.height=g.size,x.x=v.x,x.y=v.y+v.height+f,x.width=v.width,x.height=v.height}const W=30;function Lo(){const o=C.width/V.length;V.forEach((e,t)=>{const r=t*o,i=0;e.x=r,e.y=i,e.width=o,e.height=W,m.fillStyle="#fff",m.fillRect(r+2,i,o-4,W),m.font="20px Arial",m.textAlign="center",m.textBaseline="middle",m.fillStyle="#000",m.fillText(e.icon,r+o/2-30,W/2),m.font="16px Arial",m.fillText(e.title,r+o/2+30,W/2)})}function Go(){I.forEach(o=>{o.closeCard.draw(m),o.openCards.forEach(e=>e.draw(m))})}function No(){K.forEach(o=>o.draw(m))}function Po(){Y.forEach(o=>o.draw(m))}function X(){M.forEach(o=>{o.people.forEach(e=>e.draw(m)),o.tokens.forEach(e=>e.draw(m)),o.green.draw(m),o.tmpTokens.forEach(e=>e.draw(m)),o.scores.draw(m),o.cities.forEach(e=>e.draw(m)),o.a.draw(m),o.btnIn.draw(m),o.btnOut.draw(m),o.showFirst.draw(m),o.coveredCards.forEach(e=>e.draw(m)),o.showWinner.draw(m)})}function Se(){return[{x:0,y:C.height},{x:0,y:0},{x:C.width,y:0},{x:C.width,y:C.height}].slice(0,k)}function Bo(){const o=Se();g.pointTo(o,!1),g.draw(m)}function Uo(){v.draw(m),x.draw(m)}function se(){console.log("===Blaze=== in draw"),m.clearRect(0,0,C.width,C.height),Lo(),Ro(),Go(),Ao(),No(),ko(),Po(),So(),X(),bo(),Bo(),vo(),Uo()}function oe(){C.width=window.innerWidth,C.height=window.innerHeight,I=qe(),Je(),Qe(),M=Ze(),g.resetCornerIndex(),we(),se()}function xo(){C.width=window.innerWidth,C.height=window.innerHeight,se()}C.addEventListener("click",o=>{const e=C.getBoundingClientRect(),t=o.clientX-e.left,r=o.clientY-e.top;Ve(t,r)});window.addEventListener("resize",xo);oe();
